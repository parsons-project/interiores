package interiores.presentation.swing.views;

import interiores.core.Debug;
import interiores.core.presentation.annotation.Event;
import interiores.presentation.swing.SwingPanel;
import interiores.presentation.swing.views.map.GridMap;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;

/**
 *
 * @author hector
 */
public class RoomMapPanel extends SwingPanel
{
    private GridMap map;

    /**
     * Creates new form RoomMap
     */
    public RoomMapPanel()
    {
        map = null;
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify this
     * code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents()
    {

        setLayout(null);
    }// </editor-fold>//GEN-END:initComponents
    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables

    @Override
    public void paintComponent(Graphics g)
    {
        if(map != null)
            map.draw((Graphics2D) g);
    }
    
    @Event(paramNames = {"width", "depth"})
    public void roomCreated(int width, int depth)
    {
        map = new GridMap(width, depth);
        
        if(Debug.isEnabled())
            map.enableGrid();
        
        setPreferredSize(new Dimension(map.getWidth(), map.getHeight()));  
    }
    
    @Event(paramNames = {"width", "depth"})
    public void roomLoaded(int width, int depth)
    {
        roomCreated(width, depth);
    }
    
    @Event(paramNames = {"orientation", "size", "displacement", "hasToOpenLeft", "hasToOpenOutwards"})
    public void doorAdded(String orientation, int size, int displacement, boolean hasToOpenLeft,
            boolean hasToOpenOutwards) {
        map.addDoor(orientation, size, displacement, hasToOpenLeft, hasToOpenOutwards);
    }
    
    @Event(paramNames = {"orientation", "size", "displacement"})
    public void windowAdded(String orientation, int size, int displacement) {
        map.addWindow(orientation, size, displacement);
    }
    
    @Event(paramNames = {"x", "y", "width", "depth"})
    public void pillarAdded(int x, int y, int width, int depth) {
        map.addPillar(x, y, width, depth);
    }
    
    @Event(paramNames = {"name", "x", "y", "width", "depth", "orientation"})
    public void furnitureAdded(String name, int x, int y, int width, int depth, String orientation) {
        map.addFurniture(name, x, y, width, depth, orientation);
    }
}
